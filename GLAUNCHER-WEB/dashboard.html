<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Accede a tu perfil de GLauncher. Gestiona tus amigos, cosméticos, logros, estadísticas y ajustes de cuenta en un solo lugar.">
    <title>GLauncher | Dashboard</title>
    <!-- Estilos optimizados para carga asíncrona -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"></noscript>
    <link rel="stylesheet" href="css/styles.css">  
    <link rel="stylesheet" href="css/dashboard-styles.css">
    <link rel="icon" type="image/png" href="images/glauncher logo.png">
</head>
<body>
    <!-- Spinner de Carga, Notificaciones y Pantalla Offline -->
    <div id="notification-container"></div>
    <div id="offline-overlay" class="offline-overlay"><div class="offline-content"><i class="fas fa-wifi"></i><h2>Sin Conexión</h2><p>Revisa tu red e inténtalo de nuevo.</p></div></div>


        <header class="header">
        <div class="logo-container">
            <img src="images/glauncher logo.png" alt="Logo de GLauncher" class="logo">
            <h1>GLauncher</h1>
        </div>
        <nav class="auth-buttons">
            <a href="radio.html" class="auth-button">Radio</a> 
            <a href="index.html" class="auth-button active">Inicio</a> 
            <a href="noticias.html" class="auth-button">Noticias</a>
            <a href="shop.html" class="auth-button">Tienda</a>
            <a href="download.html" class="auth-button">Descargas</a>
            <a href="dashboard.html" class="auth-button">Dashboard</a>
            <a href="login.html" class="auth-button">Iniciar Sesión</a>
            <a href="register.html" class="auth-button">Registrar</a>
            <a href="https://www.youtube.com/@DaniCraftYT25" target="_blank" class="auth-button youtube-button" title="Visita mi canal de YouTube">
                <i class="fab fa-youtube"></i> Canal
            </a>
        </nav>
    </header>

    <main class="dashboard-main-content">
        <div class="dashboard-container">
            

            <nav class="floating-nav">
                <div class="nav-profile-section">
                    <img id="nav-avatar" src="images/avatars/default-avatar.png" alt="Avatar" class="nav-avatar">
                    <span id="nav-username">Cargando...</span>
                    <div id="user-role-container" class="user-role-container" style="display: none;">
                        <i class="fas fa-gem"></i> <!-- Icono por defecto, se cambiará con JS -->
                        <span id="user-role"></span>
                    </div>
                    <!-- Nuevo Menú de Estado -->
                    <div class="status-menu-container">
                        <div id="status-display" class="status-display">
                            <span id="status-indicator" class="status-indicator online"></span>
                            <span id="status-text">Disponible</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div id="status-options" class="status-options"></div>
                    </div>
                    <!-- Contenedor para usuario no logueado -->
                    <div id="nav-guest-section" class="nav-guest-section" style="display: none;">
                        <span>¡Bienvenido, Invitado!</span>
                        <p>Inicia sesión para ver tu perfil y estadísticas.</p>
                        <a href="login.html" class="action-btn">Iniciar Sesión</a>
                    </div>
                </div>
                <div class="nav-links-section">
                    <a href="#" class="floating-nav-item active" data-target="gchat-section"><i class="fas fa-comments"></i> GChat</a>
                    <a href="#" class="floating-nav-item" data-target="friends-section"><i class="fas fa-user-friends"></i> Amigos</a>
                    <a href="#" class="floating-nav-item" data-target="skins-section"><i class="fas fa-paint-brush"></i> Skins</a>
                    <a href="#" class="floating-nav-item" data-target="achievements-section"><i class="fas fa-trophy"></i> Logros</a>
                    <a href="#" class="floating-nav-item" data-target="stats-section"><i class="fas fa-chart-line"></i> Estadísticas</a>
                    <a href="#" class="floating-nav-item" data-target="settings-section"><i class="fas fa-cogs"></i> Ajustes</a>
                    <a href="admin.html" id="admin-nav-button" class="floating-nav-item" style="display: none;"><i class="fas fa-user-shield"></i> Admin</a>
                </div>
                <div class="nav-actions-section">
                    <button id="launch-game-btn" class="launch-button"><i class="fas fa-play"></i> Iniciar Juego</button>
                    <button id="logout-btn" class="logout-button" title="Cerrar Sesión"><i class="fas fa-sign-out-alt"></i></button>
                </div>
            </nav>
            
            <section class="dashboard-content-area">
                <!-- SECCIÓN DE GCHAT (NUEVA) -->
                <section id="gchat-section" class="content-section active">
                    <header class="section-header"><i class="fas fa-comments"></i> GChat - Mensajería</header>
                    <div class="gchat-container">
                        <div id="gchat-sidebar" class="gchat-sidebar">
                            <div class="gchat-sidebar-header">Conversaciones</div>
                            <div id="gchat-conversation-list">
                                <!-- Las conversaciones se cargarán aquí -->
                            </div>
                        </div>
                        <div id="gchat-main" class="gchat-main">
                            <div id="gchat-welcome-screen" class="gchat-welcome-screen">
                                <i class="fas fa-comments"></i>
                                <h3>Bienvenido a GChat</h3>
                                <p>Selecciona una conversación para empezar a chatear.</p>
                            </div>
                            <div id="gchat-messages-container" class="gchat-messages-container" style="display: none;">
                                <!-- Los mensajes se cargarán aquí -->
                            </div>
                            <form id="gchat-input-form" class="gchat-input-form" style="display: none;">
                                <input type="text" id="gchat-message-input" placeholder="Escribe un mensaje...">
                                <button type="submit" class="action-btn">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </form>
                        </div>
                    </div>
                </section>

                <!-- SECCIÓN DE AMIGOS (NUEVA) -->
                <section id="friends-section" class="content-section">
                    <header class="section-header"><i class="fas fa-user-friends"></i> Mis Amigos</header>
                    <div class="friends-list-container">
                        <div class="friends-search-bar">
                            <input type="text" id="friend-search-input" class="neon-input-field" placeholder="Buscar usuario...">
                        </div>
                        <div id="friends-list" class="friends-list"></div>
                    </div>
                </section>

                <!-- SECCIÓN DE SKINS (NUEVA) -->
                <section id="skins-section" class="content-section">
                    <header class="section-header"><i class="fas fa-paint-brush"></i> Gestor de Skins</header>
                    <div id="skins-inventory-grid" class="skins-grid"></div>
                </section>

                <!-- SECCIÓN DE ESTADÍSTICAS (EXISTENTE) -->
                <section id="stats-section" class="content-section">
                    <header class="section-header"><i class="fas fa-database"></i> Registros y Analítica</header>
                    <div class="stats-grid">
                        <div class="stat-card stat-pink">
                            <i class="fas fa-coins"></i>
                            <p id="stat-gcoins" class="stat-main-value">0</p>
                            <p class="text-color-dark">GCoins</p>
                        </div>
                        <div class="stat-card stat-blue">
                            <i class="fas fa-calendar-alt"></i>
                            <p id="stat-register-date" class="stat-main-value">--/--/----</p>
                            <p class="text-color-dark">Miembro Desde</p>
                        </div>
                        <div class="stat-card stat-green">
                            <i class="fas fa-gem"></i>
                            <p id="stat-cosmetics" class="stat-main-value">0</p>
                            <p class="text-color-dark">Cosméticos</p>
                        </div>
                        <div class="stat-card stat-yellow">
                            <i class="fas fa-hourglass-half"></i>
                            <p id="stat-playtime" class="stat-main-value">0h</p>
                            <p class="text-color-dark">Tiempo de Juego</p>
                        </div>
                    </div>
                </section>

                <!-- SECCIÓN DE LOGROS (NUEVA) -->
                <section id="achievements-section" class="content-section">
                    <header class="section-header"><i class="fas fa-trophy"></i> Mis Logros</header>
                    <div class="achievements-filter-controls">
                        <button class="filter-btn active" data-filter="all">Todos</button>
                        <button class="filter-btn" data-filter="unlocked">Desbloqueados</button>
                        <button class="filter-btn" data-filter="locked">Bloqueados</button>
                        <button class="filter-btn" data-filter="recommended">Recomendados</button>
                    </div>
                    <div id="achievements-grid" class="achievements-grid">
                        <!-- Los logros se generarán dinámicamente aquí -->
                    </div>
                </section>

                <!-- SECCIÓN DE AJUSTES (MEJORADA) -->
                <section id="settings-section" class="content-section">
                    <header class="section-header"><i class="fas fa-cogs"></i> Ajustes de Cuenta</header>
                    <div class="settings-form-container">
                        <form id="account-settings-form">
                            <h4><i class="fas fa-user-edit"></i> Perfil</h4>
                            <div class="form-group">
                                <label for="username-change">Cambiar nombre de usuario</label>
                                <input type="text" id="username-change" name="username" class="neon-input-field" placeholder="Nuevo nombre...">
                            </div>                            
                            <div class="form-group avatar-upload-group">
                                <label>Cambiar foto de perfil</label>
                                <div class="avatar-preview-container">
                                    <img id="settings-avatar-preview" src="images/avatars/default-avatar.png" alt="Avatar Preview">
                                    <label for="avatar-change-file" class="avatar-upload-label" title="Seleccionar nueva imagen">
                                        <i class="fas fa-camera"></i>
                                    </label>
                                    <input type="file" id="avatar-change-file" name="avatar_file" accept="image/png, image/jpeg, image/gif" style="display: none;">
                                </div>
                            </div>
                            <hr>
                            <h4><i class="fas fa-key"></i> Seguridad</h4>
                            <div class="form-group">
                                <label for="password-change">Nueva Contraseña</label>
                                <input type="password" id="password-change" name="password" class="neon-input-field" placeholder="Deja en blanco para no cambiar">
                            </div>
                            <div class="form-group">
                                <label for="password-confirm">Confirmar Nueva Contraseña</label>
                                <input type="password" id="password-confirm" name="password_confirm" class="neon-input-field" placeholder="Repite la nueva contraseña">
                            </div>
                            <button type="submit" class="action-btn save-btn">Guardar Cambios</button>
                        </form>

                        <form id="privacy-settings-form">
                            <h4><i class="fas fa-user-secret"></i> Privacidad</h4>
                            <div class="setting-toggle">
                                <label for="show-online-status">Mostrar mi estado de conexión a mis amigos</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="show-online-status" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="setting-toggle">
                                <label for="allow-friend-requests">Permitir solicitudes de amistad de cualquiera</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="allow-friend-requests" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </form>

                        <div id="danger-zone" class="danger-zone">
                            <h4><i class="fas fa-exclamation-triangle"></i> Zona Peligrosa</h4>
                            <p>Estas acciones son permanentes. Procede con cuidado.</p>
                            <button id="delete-account-btn" class="action-btn danger-btn">Eliminar mi cuenta</button>
                        </div>
                    </div>
                </section>
            </section>
        </div>
    </main>

    <!-- Banner de Consentimiento de Cookies -->
    <div id="cookie-banner" class="cookie-consent-banner">
        <p class="cookie-text">
            Utilizamos cookies para mejorar tu experiencia en nuestro sitio. Al continuar, aceptas nuestro uso de cookies. <a href="/privacy-policy.html">Leer más</a>.
        </p>
        <button id="accept-cookie-btn" class="auth-button-action cookie-accept-btn" style="background-color: var(--neon-green); box-shadow: var(--shadow-green);">Aceptar</button>
    </div>

    <script src="js/global-script.js" defer></script>
    <script src="js/dashboard-script.js" defer></script>
</body>
</html>
